<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Defaultzlq</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Defaultzlq">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Defaultzlq">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Defaultzlq">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="Defaultzlq" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Defaultzlq</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-user-management" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/21/user-management/" class="article-date">
  <time datetime="2015-11-21T11:49:39.009Z" itemprop="datePublished">2015-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/21/user-management/">User Management</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>Control userpasswords2</li>
<li>gpedit.msc-→计算机配置-→WINDOWS设置-→安全设置-→本地策略-→安全选项-→网络访问: 不允许存储网络身份验证的凭据或 .NET Passports</li>
<li>gpedit.msc-→计算机配置-→Windows设置-→安全设置-→本地策略-→安全选项-→交互式登录：可被缓冲的前次登陆个数（在域控制器不可用的情况下）-→缓存10次登录<br>HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\Current Version\Winlogon\<br>ValueName: CachedLogonsCount<br>Data Type: REG_SZ<br>Values: 0 - 50</li>
<li>用户在本地登录到域时，DC验证用户身份通过后，会替用户建立一个访问令牌（Access Token），其中包含着该用户的SID及用户所属所有组的SID</li>
<li>以管理员身份登录到本机，右击我的电脑–属性–高级–用户配置文件（设置）–选中刚才的测试用户配置文件–单击“复制到”，保存到一个特定的位置，并把该文件夹取名为default user</li>
<li>SID:三段数字是域的ID号，后面的ID是用户的</li>
<li>ID号是由一个叫RID操作主机的服务器来负责分发的</li>
<li>域环境下，在DC上注册acctinfo.dll动态链接库，为用户增加有关SID等信息的属性。注册命令：regsvr32 acctinfo.dll (该dll文件在Windows Resource Kit Tools内存在</li>
<li>客户端应用组策略：<br>计算机启动：刷新周期，应用计算机配置、运行启动脚本。<br>用户登录：刷新周期，应用用户设置，运行登录脚本。</li>
<li>GPO=GPC+GPT </li>
<li>组策略的应用顺序：Local—&gt;site—&gt;domain—&gt;OU—&gt;子OU</li>
<li>GPO只能链接到容器上（即LSDOU），只能对容器里面的计算机或用户生效，而对组无效</li>
<li>组策略的生效时间： a. 计算机策略设置：计算机启动、手动刷新（gpupdate /force)、90-120分钟后台周期刷新。 b. 用户策略设置：用户登录、手动刷新（gpupdate /force)、90-120分钟后台刷新。c. DC的策略设置：5分钟后台周期刷新。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/21/user-management/" data-id="cimiumjp80001q4layl5ors27" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-How-to-create-Hyper-V-VM-template-without-VMM" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/12/How-to-create-Hyper-V-VM-template-without-VMM/" class="article-date">
  <time datetime="2015-11-12T00:55:03.528Z" itemprop="datePublished">2015-11-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>How to create a Hyper-V VM template without VMM</p>
<p>quickly deploy new VM’s from, without having to install and patch them each time.</p>
<ol>
<li><p>First, create a VM, install the operating system and patch it.</p>
</li>
<li><p>On your template VM browse to C:WindowsSystem32Sysprep folder, and run Sysprep. Select the option to Generalize, and select Shutdown from the drop down menu.</p>
</li>
<li><p>In the Hyper-V Manager export the VM, right click your template VM and select Export.</p>
</li>
</ol>
<p>leave the original virtual machine template in Hyper-V Manager, as every few months after more patches have been released you will want to update it and create a new template.</p>
<p> how to deploy a new virtual machine from the template. It’s not just a case of selecting Import in the Hyper-V Manager, because the exported virtual machine and it’s disks still exist and when you import a VM you don’t have the option to rename them.</p>
<ol>
<li><p>Create new VM without the disks, select New then choose Virtual Machine, configure the machine, selecting the same generation as the template you created, but CPU, memory and networking settings can be different. When you get to the Connect Virtual Hard Disk option, select Attach a virtual hard disk later, click Next and Finish.</p>
</li>
<li><p>Browse to your template VM folder (D:\Templates\Win 2012 R2 G2\Virtual Hard Disks) and copy the VHDX file locally.</p>
</li>
<li><p>Rename the copied VHDX to be the same as the virtual machine you have just created</p>
</li>
<li><p>Cut and paste the disk into the default location on your Hyper-V server for your VHDX files. </p>
</li>
<li><p>In Hyper-V Manager, right click the new VM you have deployed and select Settings, then select the SCSI Controller option (for Generation 1 virtual machines, select the IDE Controller 0). Highlight Hard Drive and click Add.</p>
</li>
<li><p>Browse to D:\Hyper-V\Virtual Hard Disks and select the VHDX file you cut and pasted earlier in step 4. Click Apply.</p>
</li>
<li><p>Now go to the Firmware option, select the hard drive you have just added and click Move Up, so it is the first boot entry. Click Apply. Click OK.</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/11/12/How-to-create-Hyper-V-VM-template-without-VMM/" data-id="cimiumjlh0000q4la27m4celu" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-server-2012-best-practice" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/21/server-2012-best-practice/" class="article-date">
  <time datetime="2015-10-21T08:02:11.908Z" itemprop="datePublished">2015-10-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="RDP_Printer_Mapping_should_be_disabled_on_hosts,_to_remove_any_chance_of_a_printer_driver_causing_instability_issues_on_the_host_machine-">RDP Printer Mapping should be disabled on hosts, to remove any chance of a printer driver causing instability issues on the host machine.</h4><p>Preferred method: Use Group Policy with host servers in their own separate OU<br>Computer Configuration –&gt; Policies –&gt; Administrative Templates –&gt; Windows Components –&gt; Remote Desktop<br>Services –&gt; Remote Desktop Session Host –&gt; Printer Redirection –&gt; Do not allow client printer redirection –&gt; Set to “Enabled  </p>
<h4 id="Default_path_for_Virtual_Hard_Disks_﴾VHD/VHDX﴿_should_be_set_to_a_non‐system_drive,_due_to_this_can_cause_disk_latency_as_well_as_create_the_potential_for_the_host_running_out_of_disk_space-">Default path for Virtual Hard Disks ﴾VHD/VHDX﴿ should be set to a non‐system drive, due to this can cause disk latency as well as create the potential for the host running out of disk space.</h4><h4 id="If_you_choose_to_save_the_VM_state_as_the_Automatic_Stop_Action,_the_default_virtual_machine_path_should_be_set_to_a_non‐system_drive,_due_to_the_creation_of_a_-bin_file_is_created_that_matches_the_size_of_memory_reserved_for_the_virtual_machine-A_-vsv_file_may_also_be_created_in_the_same_location_as_the_-bin_file,_adding_to_disk_space_used_for_each_VM-_﴾The_default_path_is:_C:\ProgramData\Microsoft\Windows\Hyper‐V-﴿">If you choose to save the VM state as the Automatic Stop Action, the default virtual machine path should be set to a non‐system drive, due to the creation of a .bin file is created that matches the size of memory reserved for the virtual machine.A .vsv file may also be created in the same location as the .bin file, adding to disk space used for each VM. ﴾The default path is: C:\ProgramData\Microsoft\Windows\Hyper‐V.﴿</h4><p>Note: Hyper‐V in Server 2012 will now only use the .bin if you choose to save the VM state as the Automatic<br>Stop Action.<br>Change to .bin usage in Server 2012: <a href="http://blogs.msdn.com/b/virtual_pc_guy/archive/2012/03/26/option‐to‐" target="_blank" rel="external">http://blogs.msdn.com/b/virtual_pc_guy/archive/2012/03/26/option‐to‐</a><br>remove‐bin‐files‐with‐hyper‐v‐in‐windows‐8.aspx</p>
<h4 id="Periodically_run_performance_counters_against_the_host,_to_ensure_optimal_performance-">Periodically run performance counters against the host, to ensure optimal performance.</h4><p>Recommend using the Hyper‐V performance counter that can be extracted from the ﴾free﴿ Codeplex PAL application:<br><a href="http://pal.codeplex.com/" target="_blank" rel="external">http://pal.codeplex.com/</a><br>Install PAL on a workstation and open it, then click on the Threshold File tab.<br>Select “Microsoft Windows Server 2012 Hyper‐V” from the Threshold file title, then choose Export to Perfmon template<br>file. Save the XML file to a location accessible to the Hyper‐V host.<br>Next, on the host, open Server Manager –&gt; Tool –&gt; Performance Monitor<br>In Performance Monitor, click on Data Collector Sets –&gt; User Defined. Right click on User Defined and choose New –&gt; Data Collector Set. Name the collector set “Hyper‐V Performance Counter Set” and select Create from a template<br>(Recommended) then choose Next. On the next screen, select Browse and then locate the XML file you exported from<br>the PAL application. Once done, this will show up in your User Defined Data Collector Sets.<br>Run these counters in Performance Monitor for 30 minutes to 1 hour ﴾during high usage times﴿ and look for disk<br>latency, memory and CPU issues, etc.</p>
<h4 id="When_creating_virtual_switches,_it_is_best_practice_to_uncheck_Allow_management_operating_system_to_share_this_network_adapter,_in_order_to_create_a_dedicated_network_for_your_VM﴾s﴿_to_communicate_with_other_computers_on_the_physical_network-_﴾If_the_management_adapter_is_shared,_do_not_modify_protocols_on_the_NIC-﴿">When creating virtual switches, it is best practice to uncheck Allow management operating system to share this network adapter, in order to create a dedicated network for your VM﴾s﴿ to communicate with other computers on the physical network. ﴾If the management adapter is shared, do not modify protocols on the NIC.﴿</h4><p>Please note: we fully support and even recommend (in some cases) using the virtual switch to separate networks for Management,<br>Live Migration, CSV/Heartbeat and even iSCSI. For example two 10GB NIC’s that are split out using VLANs and QoS</p>
<h4 id="The_recommended_minimum_free_space_on_CSV_volumes_containing_Hyper‐V_virtual_machine_VHD_and/or_VHDX_files:">The recommended minimum free space on CSV volumes containing Hyper‐V virtual machine VHD and/or VHDX files:</h4><p>15% free space, if the partition size is less than 1TB<br>10% free space, if the partition size is between 1TB and 5TB<br>5% free space, if the partition size is greater than 5TB<br>To enumerate current volume information, including the percentage free, you can use the following PowerShell command:<br>Get‐ClusterSharedVolume “Cluster Disk 1” | fc *<br>Review the “PercentageFree” output</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/10/21/server-2012-best-practice/" data-id="cimiumjpx0004q4laerkdag82" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hp-ilo" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/21/hp-ilo/" class="article-date">
  <time datetime="2015-10-21T01:00:16.365Z" itemprop="datePublished">2015-10-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>HP</p>
<p>G6 G7 iLO3<br>G8 G9 iLO4</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/10/21/hp-ilo/" data-id="cimiumjql000cq4lazfxmvsd4" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-install-wsus-admin-console" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/20/install-wsus-admin-console/" class="article-date">
  <time datetime="2015-10-20T03:32:08.568Z" itemprop="datePublished">2015-10-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/20/install-wsus-admin-console/">Install WSUS Admin Console</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="Install_the_WSUS_3-0_SP2_Administration_Console">Install the WSUS 3.0 SP2 Administration Console</h5><p>On the Installation Mode Selection page, select the Administration Console only check box</p>
<p><a href="http://www.microsoft.com/en-us/download/details.aspx?id=5216" target="_blank" rel="external">Windows Server Update Services 3.0 SP2</a></p>
<p><a href="http://www.microsoft.com/en-us/download/details.aspx?id=6576" target="_blank" rel="external">Microsoft Report Viewer 2008 Redistributable</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/10/20/install-wsus-admin-console/" data-id="cimiumjqi000bq4labc86gg8b" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-disabling-windows-firewall-on-hyper-v-server-2012-r2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/16/disabling-windows-firewall-on-hyper-v-server-2012-r2/" class="article-date">
  <time datetime="2015-10-16T02:16:12.199Z" itemprop="datePublished">2015-10-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/16/disabling-windows-firewall-on-hyper-v-server-2012-r2/">Disabling Windows Firewall on Hyper-V Server 2012 R2</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Process will run on Windows Power Shell  </p>
<pre><code>powershell  
netsh advfirewall <span class="built_in">set</span> allprofiles <span class="keyword">state</span> off

Restart-Computer
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/10/16/disabling-windows-firewall-on-hyper-v-server-2012-r2/" data-id="cimiumjqw000fq4lah10xfjlg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Python-xlwt" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/13/Python-xlwt/" class="article-date">
  <time datetime="2015-10-13T01:20:21.900Z" itemprop="datePublished">2015-10-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/13/Python-xlwt/">Python xlwt</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="xlwt模块">xlwt模块</h3><h6 id="导入xlwt模块">导入xlwt模块</h6><p>import xlwt</p>
<h6 id="新建Excel中sheet">新建Excel中sheet</h6><pre><code>w = xlwt.<span class="function"><span class="title">Workbook</span><span class="params">()</span></span>
ws = w.<span class="function"><span class="title">add_sheet</span><span class="params">(sheetname, cell_overwrite_ok=True)</span></span>
</code></pre><p><code>cell_overwrite_ok=True</code>设置Excel内容可覆写</p>
<h6 id="设置格式">设置格式</h6><pre><code>style = xlwt.<span class="function"><span class="title">XFStyle</span><span class="params">()</span></span>
<span class="attribute">font</span> = xlwt.<span class="function"><span class="title">Font</span><span class="params">()</span></span>
<span class="attribute">font</span><span class="class">.name</span> = u<span class="string">'新細明體'</span>
style<span class="class">.font</span> = <span class="attribute">font</span>
</code></pre><h6 id="在Excel对应位置写入内容">在Excel对应位置写入内容</h6><p><code>ws.write(col, row, u&#39;\u25cf&#39;, style)</code>  </p>
<h6 id="保存Excel">保存Excel</h6><p><code>w.save(filepath)</code>  </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/10/13/Python-xlwt/" data-id="cimiumjr9000iq4lagr4bmv7n" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Python-os" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/13/Python-os/" class="article-date">
  <time datetime="2015-10-13T00:49:16.813Z" itemprop="datePublished">2015-10-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/13/Python-os/">Python os</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="os模块">os模块</h3><h6 id="导入os模块">导入os模块</h6><p><code>import os</code> </p>
<h6 id="通过目录和文件名生成路径">通过目录和文件名生成路径</h6><p><code>filepath = os.path.join(dir, filename)</code>  </p>
<p>文件路径也可以通过以下方式生成<br><code>filepath = &quot;%s\%s&quot; % dir, filename</code>  </p>
<h6 id="通过路径获取文件名">通过路径获取文件名</h6><p><code>filename = os.path.basename(filepath)</code>  </p>
<h6 id="遍历整个目录，并以此处理每个文件">遍历整个目录，并以此处理每个文件</h6><p>其中root为当前目录，dirs为当前目录中的目录，files为当前目录中的所有文件  </p>
<pre><code><span class="keyword">for</span> root, dirs, files <span class="keyword">in</span> os.<span class="function"><span class="title">walk</span><span class="params">(dir)</span></span>:
    <span class="keyword">for</span> fname <span class="keyword">in</span> files:  
</code></pre><p>注意dir需设置为utf-8格式，以防目录中存在简繁体目录时乱码，例如：<br><code>dir = u&#39;c:\tmp&#39;</code>  </p>
<h6 id="删除文件">删除文件</h6><p><code>os.remove(filepath)</code>  </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/10/13/Python-os/" data-id="cimiumjrc000jq4lanligltyv" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-my-list" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/11/my-list/" class="article-date">
  <time datetime="2015-10-11T10:05:01.033Z" itemprop="datePublished">2015-10-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/11/my-list/">My List</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li>打印监控<a href="http://www.printusagepro.com/" target="_blank" rel="external">PrintUsage Pro</a> &amp; <a href="http://www.printusage.com/" target="_blank" rel="external">PrintUsage</a></li>
<li>MySQL主从复制、全备和增量备份</li>
<li>SCVMM 2012 R2</li>
<li>VMware vSphere &amp; vCenter<br>請問hyper-v cluster 架設起來後關於cluster 部分有需要做甚麼樣的備份嗎?<br>目前我都是採用 DPM 2012 ( Microsoft System Center 2012 Data Protection Manager ) 來針對特別重要的 Guest VM 做備份，至於 Cluster 來說目前測試過如果掛掉一台的話，是還可以撐得住，因此我們就平常會檢測 Storage 和 Server 的狀態，其他就沒有特別做其他的備份了。<br><a href="http://www.dotblogs.com.tw/jamesfu/Default.aspx" target="_blank" rel="external">五餅二魚工作室</a></li>
<li><a href="https://technet.microsoft.com/library/aa991542" target="_blank" rel="external">TechNet 技術文件庫</a></li>
<li>add</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/10/11/my-list/" data-id="cimiumjq40007q4lac1olixmi" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-mysql-replication" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/09/mysql-replication/" class="article-date">
  <time datetime="2015-10-09T11:36:48.948Z" itemprop="datePublished">2015-10-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/09/mysql-replication/">MySQL Master Slave Replication</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="master:">master:</h3><p>编辑配置文件</p>
<pre><code>vi /etc/<span class="keyword">my</span>.cnf
[mysqld]
<span class="command">log</span>-bin=mysql-bin
server-<span class="property">id</span>=<span class="number">1</span>
</code></pre><p>重启mysql服务</p>
<pre><code><span class="title">service</span> mysql restart
</code></pre><p>建立备份帐号并授权</p>
<pre><code>mysql&gt; <span class="keyword">CREATE</span> USER <span class="string">'repl'</span>@<span class="string">'%'</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">'password'</span>;
mysql&gt; GRANT REPLICATION SLAVE <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'repl'</span>@<span class="string">'%'</span>;
</code></pre><p>获取位置信息</p>
<pre><code>mysql&gt; FLUSH TABLES WITH READ LOCK;
<span class="header">mysql&gt; SHOW MASTER STATUS;
+------------------+----------+--------------+------------------+</span>
<span class="header">| File | Position | Binlog_Do_DB | Binlog_Ignore_DB |
+------------------+----------+--------------+------------------+</span>
<span class="header">| mysql-bin.000003 | 73   | test | manual,mysql |
+------------------+----------+--------------+------------------+</span>
mysql&gt; UNLOCK TABLES;
</code></pre><h3 id="slave:">slave:</h3><p>编辑配置文件</p>
<pre><code>vi /etc/<span class="keyword">my</span>.cnf
[mysqld]
server-<span class="property">id</span>=<span class="number">2</span>
</code></pre><p>重启mysql服务</p>
<pre><code><span class="title">service</span> mysql restart
</code></pre><p>配置复制信息并启动</p>
<pre><code>mysql&gt; CHANGE MASTER TO
-<span class="ruby">&gt; <span class="constant">MASTER_HOST</span>=<span class="string">'master_host_name'</span>,
</span>-<span class="ruby">&gt; <span class="constant">MASTER_USER</span>=<span class="string">'replication_user_name'</span>,
</span>-<span class="ruby">&gt; <span class="constant">MASTER_PASSWORD</span>=<span class="string">'replication_password'</span>,
</span>-<span class="ruby">&gt; <span class="constant">MASTER_LOG_FILE</span>=<span class="string">'recorded_log_file_name'</span>,
</span>-<span class="ruby">&gt; <span class="constant">MASTER_LOG_POS</span>=recorded_log_position;
</span>mysql&gt; start slave;
mysql&gt; show slave status\G
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/10/09/mysql-replication/" data-id="cimiumjq20006q4la71i6ugmu" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">9</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/07/05/microsoft-assessment-planning/">MAP</a>
          </li>
        
          <li>
            <a href="/2016/07/05/localgpo/">GPO Tool</a>
          </li>
        
          <li>
            <a href="/2016/07/05/doclib-approval/">(no title)</a>
          </li>
        
          <li>
            <a href="/2016/07/05/mvacc/">MVA CC</a>
          </li>
        
          <li>
            <a href="/2016/07/05/goodbook1/">Good book</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Defaultzlq<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>